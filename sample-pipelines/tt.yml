---
- hosts: localhost

  vars:
    Prd_GitLab_Passwd: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32363264653364376135366631376230343830633838373139393839633539656135353965306362
          6565633436313738343266666539653130306663356238650a396662306430633637643063376434
          38396335633263653835363262303137363736326661336263383630343236353437636161323633
          6138366561373930320a633231346632373732346337313766663432383935373839646662373338
          31346132633031393232316366333866376463373239383462613936326431383937

    gitlabAccessToken: "{{ lookup('password', '/dev/null length=20')}}"

    #registration_token: "{{ 'uvu1zFo5okhrn69uBLApq' if ansible_hostname is search('symtstgtlbcivm001')
    #          else '{{ gitlabAccessToken | quote }}'
    #       }}"
    registration_token: "{{ 'uvu1zFo5okhrn69uBLApq' if ansible_hostname is search('symprdgtlbcivm001')
                        else  gitlabAccessToken 
                       }}"

  tasks:

      - debug:
          msg: "{{ Prd_GitLab_Passwd }}" 

      - debug:
          msg: "GitLabAccessToken is ==> {{ gitlabAccessToken }}"
         
      - debug:
              msg: "RegistrationToken ==> {{ registration_token }}" 
